# Mentorium Chat Bot

Telegram –±–æ—Ç –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã Mentorium - –æ–Ω–ª–∞–π–Ω-–æ–±—É—á–µ–Ω–∏–µ –¥–µ—Ç–µ–π —Å AI-–Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–æ–º.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìä **–ü—Ä–æ–≥—Ä–µ—Å—Å-–æ—Ç—á—ë—Ç—ã**: –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –æ—Ç—á—ë—Ç—ã —Ä–æ–¥–∏—Ç–µ–ª—è–º –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ —Ä–µ–±—ë–Ω–∫–∞
- üí¨ **AI-–¥–∏–∞–ª–æ–≥–∏**: –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ —Å AI-–Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–æ–º –ø–æ –≤–æ–ø—Ä–æ—Å–∞–º –æ–±—É—á–µ–Ω–∏—è
- üí≥ **–û–ø–ª–∞—Ç–∞**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Payme –∏ Click –¥–ª—è –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω–∞
- üîî **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏ —Ä–∞—Å—Å—ã–ª–∫–∏

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ú–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ Python —Å —Å–ª–µ–¥—É—é—â–∏–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏:

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è (`apps/`)
- **telegram_bot**: –û—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç –Ω–∞ aiogram 3.x
- **reporting_worker**: Worker –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á—ë—Ç–æ–≤ (APScheduler)
- **billing_service**: –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –æ–ø–ª–∞—Ç—ã –Ω–∞ FastAPI

### –ü–∞–∫–µ—Ç—ã (`packages/`)
- **ai_client**: –û–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ OpenAI API –¥–ª—è –¥–∏–∞–ª–æ–≥–æ–≤
- **core**: –î–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- **db**: SQLAlchemy –º–æ–¥–µ–ª–∏, –º–∏–≥—Ä–∞—Ü–∏–∏ Alembic, —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- Python 3.11+
- Poetry –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
- aiogram 3.x –¥–ª—è Telegram –±–æ—Ç–∞
- FastAPI –¥–ª—è REST API
- SQLAlchemy 2.0 + asyncpg –¥–ª—è –ë–î
- PostgreSQL (2 –±–∞–∑—ã: platform read-only + bot read-write)
- Redis –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
- OpenAI ChatCompletion API
- Payme & Click –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π
- Sentry –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Poetry (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
curl -sSL https://install.python-poetry.org | python3 -

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –ø—Ä–æ–µ–∫—Ç–∞
poetry install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –ö–æ–ø–∏—Ä—É–π—Ç–µ .env.example –≤ .env
cp .env.example .env

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –∏ –¥–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–∏ –∫–ª—é—á–∏:
# - BOT_TELEGRAM_TOKEN (–æ—Ç @BotFather)
# - BOT_OPENAI_API_KEY –∏ REPORT_OPENAI_API_KEY
# - SENTRY_DSN
# - BOT_DB_URL –∏ PLATFORM_DB_URL (–µ—Å–ª–∏ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –æ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö)
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö

#### PostgreSQL

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –±–æ—Ç–∞
sudo -u postgres psql -c "CREATE USER mentorium WITH PASSWORD 'mentorium_dev_pass';"
sudo -u postgres psql -c "CREATE DATABASE mentorium_bot OWNER mentorium;"
sudo -u postgres psql -c "GRANT ALL PRIVILEGES ON DATABASE mentorium_bot TO mentorium;"
```

#### –ú–∏–≥—Ä–∞—Ü–∏–∏

```bash
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å –ë–î –ø–∞–∫–µ—Ç–æ–º
cd packages/db

# –°–æ–∑–¥–∞–π—Ç–µ –Ω–∞—á–∞–ª—å–Ω—É—é –º–∏–≥—Ä–∞—Ü–∏—é
poetry run alembic revision --autogenerate -m "Initial schema"

# –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏
poetry run alembic upgrade head
```

### 4. –ó–∞–ø—É—Å–∫ Redis

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (Ubuntu/Debian)
sudo apt install redis-server

# –ó–∞–ø—É—Å–∫
sudo systemctl start redis

# –ü—Ä–æ–≤–µ—Ä–∫–∞
redis-cli ping  # –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å "PONG"
```

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
poetry run python scripts/verify_setup.py
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
‚úì Database connection successful
‚úì Redis connection successful
‚úì OpenAI API key valid
‚úì All checks passed! Environment is ready.
```

### 6. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ Telegram –±–æ—Ç–∞
poetry run python -m mentorium_bot
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ apps/
‚îÇ   ‚îú‚îÄ‚îÄ telegram_bot/          # –û—Å–Ω–æ–≤–Ω–æ–π Telegram –±–æ—Ç
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ mentorium_bot/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ main.py        # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ config.py      # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ dependencies.py # DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ handlers/      # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ start.py
‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ report.py
‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ dialog.py
‚îÇ   ‚îú‚îÄ‚îÄ reporting_worker/      # Worker –¥–ª—è –æ—Ç—á—ë—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ mentorium_reporting/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ main.py
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ jobs/
‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ daily_reports.py
‚îÇ   ‚îî‚îÄ‚îÄ billing_service/       # –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –ø–ª–∞—Ç–µ–∂–µ–π
‚îÇ       ‚îî‚îÄ‚îÄ mentorium_billing/
‚îÇ           ‚îú‚îÄ‚îÄ main.py
‚îÇ           ‚îú‚îÄ‚îÄ api.py         # FastAPI —Ä–æ—É—Ç—ã
‚îÇ           ‚îî‚îÄ‚îÄ service.py     # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π
‚îú‚îÄ‚îÄ packages/
‚îÇ   ‚îú‚îÄ‚îÄ ai_client/             # OpenAI –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ mentorium_ai_client/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ client.py      # AsyncOpenAI –æ–±—ë—Ä—Ç–∫–∞
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ prompts.py     # –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è AI
‚îÇ   ‚îú‚îÄ‚îÄ core/                  # –î–æ–º–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ mentorium_core/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ schemas.py     # Pydantic –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ services/      # –ë–∏–∑–Ω–µ—Å-—Å–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ reports.py
‚îÇ   ‚îî‚îÄ‚îÄ db/                    # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ       ‚îî‚îÄ‚îÄ mentorium_db/
‚îÇ           ‚îú‚îÄ‚îÄ models.py      # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ           ‚îú‚îÄ‚îÄ session.py     # –°–µ—Å—Å–∏–∏ –ë–î
‚îÇ           ‚îú‚îÄ‚îÄ settings.py    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–î
‚îÇ           ‚îî‚îÄ‚îÄ repositories/  # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
‚îú‚îÄ‚îÄ alembic/                   # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ env.py
‚îÇ   ‚îî‚îÄ‚îÄ versions/
‚îú‚îÄ‚îÄ scripts/                   # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ verify_setup.py        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ tests/                     # –¢–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ .env                       # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–µ –≤ git)
‚îú‚îÄ‚îÄ .env.example               # –ü—Ä–∏–º–µ—Ä .env
‚îú‚îÄ‚îÄ pyproject.toml             # Poetry –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ README.md
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
poetry run pytest
```

### –õ–∏–Ω—Ç–µ—Ä—ã –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
poetry run ruff check .

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
poetry run black .

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
poetry run mypy .
```

### Pre-commit hooks

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ö—É–∫–æ–≤
poetry run pre-commit install

# –ó–∞–ø—É—Å–∫ –≤—Ä—É—á–Ω—É—é
poetry run pre-commit run --all-files
```

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–¥–≤–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**:

1. **Platform DB** (read-only): –û—Å–Ω–æ–≤–Ω–∞—è –ë–î –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã Mentorium —Å –¥–∞–Ω–Ω—ã–º–∏ —É—á–µ–Ω–∏–∫–æ–≤
2. **Bot DB** (read-write): –õ–æ–∫–∞–ª—å–Ω–∞—è –ë–î –±–æ—Ç–∞ –¥–ª—è —á–∞—Ç–æ–≤, –æ—Ç—á—ë—Ç–æ–≤, –ø–ª–∞—Ç–µ–∂–µ–π

### –ú–∏–≥—Ä–∞—Ü–∏–∏

```bash
cd packages/db

# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é
poetry run alembic revision --autogenerate -m "Description"

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
poetry run alembic upgrade head

# –û—Ç–∫–∞—Ç –Ω–∞ 1 –º–∏–≥—Ä–∞—Ü–∏—é –Ω–∞–∑–∞–¥
poetry run alembic downgrade -1

# –ò—Å—Ç–æ—Ä–∏—è –º–∏–≥—Ä–∞—Ü–∏–π
poetry run alembic history
```

## –î–µ–ø–ª–æ–π

### Docker Compose (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)

```bash
docker-compose up -d
```

### Production

–°–º. `docs/DEPLOYMENT.md` –¥–ª—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –ø–æ –¥–µ–ø–ª–æ—é –≤ –ø—Ä–æ–¥–∞–∫—à–Ω.

## Roadmap

### ‚úÖ –§–∞–∑–∞ 1: Setup (–ó–∞–≤–µ—Ä—à–µ–Ω–æ)
- [x] –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
- [x] Poetry –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- [x] SQLAlchemy –º–æ–¥–µ–ª–∏
- [x] Alembic –º–∏–≥—Ä–∞—Ü–∏–∏
- [x] –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–æ—Ç–∞
- [x] CI/CD pipeline
- [x] Sentry –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### üöß –§–∞–∑–∞ 2: MVP (–í —Ä–∞–±–æ—Ç–µ)
- [ ] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ Telegram
- [ ] –ë–∞–∑–æ–≤—ã–µ AI-–¥–∏–∞–ª–æ–≥–∏ —Å –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–æ–º
- [ ] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã—Ö –æ—Ç—á—ë—Ç–æ–≤
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Payme/Click
- [ ] –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (–±–∞–∑–æ–≤–∞—è)

### üìã –§–∞–∑–∞ 3: Production
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç–∏–Ω–≥
- [ ] –ë—ç–∫–∞–ø—ã –ë–î
- [ ] Rate limiting
- [ ] –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è (—Ä—É—Å—Å–∫–∏–π/—É–∑–±–µ–∫—Å–∫–∏–π)
- [ ] Terraform –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- [ ] Load testing

### üöÄ –§–∞–∑–∞ 4: Scale
- [ ] –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] CDN –¥–ª—è –º–µ–¥–∏–∞
- [ ] –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CRM
- [ ] Webhooks –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–º. `.env.example` –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞.

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
- `BOT_TELEGRAM_TOKEN`: –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç @BotFather
- `BOT_OPENAI_API_KEY`: API –∫–ª—é—á OpenAI –¥–ª—è –¥–∏–∞–ª–æ–≥–æ–≤
- `REPORT_OPENAI_API_KEY`: API –∫–ª—é—á OpenAI –¥–ª—è –æ—Ç—á—ë—Ç–æ–≤
- `BOT_DB_URL`: URL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –±–æ—Ç–∞
- `PLATFORM_DB_URL`: URL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (read-only)
- `REDIS_URL`: URL Redis —Å–µ—Ä–≤–µ—Ä–∞
- `SENTRY_DSN`: DSN –¥–ª—è Sentry –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –°–º. `/docs`
- **Issues**: GitHub Issues
- **–í–æ–ø—Ä–æ—Å—ã**: Telegram @mentorium_dev

## –õ–∏—Ü–µ–Ω–∑–∏—è

Proprietary - –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã ¬© 2025 Mentorium

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```
apps/
  telegram_bot/        # aiogram-–±–æ—Ç –¥–ª—è Telegram
  reporting_worker/    # –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤
  billing_service/     # FastAPI-—Å–µ—Ä–≤–∏—Å –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å—á–µ—Ç–æ–≤

packages/
  ai_client/           # –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç OpenAI
  core/                # –æ–±—â–∏–µ –¥–æ–º–µ–Ω–Ω—ã–µ —Å—Ö–µ–º—ã –∏ —Å–µ—Ä–≤–∏—Å—ã
  db/                  # SQLAlchemy-–º–æ–¥–µ–ª–∏ –∏ —Ñ–∞–±—Ä–∏–∫–∏ —Å–µ—Å—Å–∏–π

infra/
  docker-compose.yml   # –ª–æ–∫–∞–ª—å–Ω—ã–µ Postgres + Redis
  terraform/           # –∫–∞—Ä–∫–∞—Å IaC

.github/workflows/ci.yml # CI pipeline –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –∏ –ª–∏–Ω—Ç–æ–≤
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Poetry (`pipx install poetry`).
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ `poetry install`.
3. –ü–æ–¥–Ω–∏–º–∏—Ç–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É `docker compose -f infra/docker-compose.yml up -d`.
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Telegram-–±–æ—Ç–∞ `poetry run python -m mentorium_bot.main`.
5. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤–∫–ª—é—á–∏—Ç–µ –≤–æ—Ä–∫–µ—Ä –æ—Ç—á–µ—Ç–æ–≤ `poetry run python -m mentorium_reporting.main`.
6. –î–ª—è REST-—Å–µ—Ä–≤–∏—Å–∞ –æ–ø–ª–∞—Ç –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `poetry run uvicorn mentorium_billing.api:app --reload`.

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ —Å –±–∞–∑–æ–≤—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:

```
BOT_TELEGRAM_TOKEN=your-telegram-token
BOT_OPENAI_API_KEY=your-openai-key
REPORT_OPENAI_API_KEY=your-openai-key
BILLING_PROVIDER_API_KEY=dummy-or-real-key
DB_URL=postgresql+psycopg://mentorium:mentorium@localhost:5432/mentorium
```

–ö–∞–∂–¥–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ `apps/` –º–æ–∂–µ—Ç —Ä–∞—Å—à–∏—Ä—è—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø–æ —Å–≤–æ–∏–º –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—è–º.

## –°–µ—Ä–≤–∏—Å—ã

- `telegram_bot` ‚Äî aiogram-–ø–æ–ª–ª–∏–Ω–≥ –±–æ—Ç: –æ–±—â–µ–Ω–∏–µ —Å —Ä–æ–¥–∏—Ç–µ–ª—è–º–∏ –∏ –¥–∏–∞–ª–æ–≥–∏ —á–µ—Ä–µ–∑ OpenAI.
- `reporting_worker` ‚Äî –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –Ω–∞ APScheduler/Celery –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç—á–µ—Ç–æ–≤.
- `billing_service` ‚Äî FastAPI REST API –¥–ª—è –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å—á–µ—Ç–æ–≤ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–æ–∫.

## –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

- `infra/docker-compose.yml` ‚Äî Postgres –∏ Redis –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.
- `infra/terraform` ‚Äî –∑–∞–≥–æ—Ç–æ–≤–∫–∞ Terraform c AWS –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º –∏ VPC –º–æ–¥—É–ª–µ–º.

## CI/CD

GitHub Actions workflow `ci.yml` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –ª–∏–Ω—Ç–∏—Ç –∏ –ø—Ä–æ–≥–æ–Ω—è–µ—Ç —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö –ø–∞–∫–µ—Ç–æ–≤ –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤ `billing_service` (–Ω–∞–ø—Ä–∏–º–µ—Ä, YooKassa/Stripe) –∏ webhook-—Ä–æ—É—Ç—ã.
- –î–æ–±–∞–≤–∏—Ç—å —Å–ª–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å CRM/–ë–î –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –æ–± —É—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç–∏.
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –º–æ–¥—É–ª–∏ Terraform (ECS/EKS, RDS, Secrets Manager).
- –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å e2e-—Ç–µ—Å—Ç—ã –∏ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –∫–ª—é—á–µ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∏–∞–ª–æ–≥–æ–≤.